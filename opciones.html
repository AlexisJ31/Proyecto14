<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <title>Nuestra Cita ‚ù§Ô∏è</title>
    <style>
        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background-image: url('https://github.com/AlexisJ31/Proyecto14/blob/main/corazonfondo.png?raw=true');
            background-size: 250px;
            background-repeat: repeat;
            opacity: 0.08;
            z-index: -1;
        }

        body {
            background-color: #fff5f7;
            font-family: -apple-system, "Inter", sans-serif;
            padding: 20px;
        }

        #countdown {
            font-weight: 700;
            color: #ff3b30;
            font-size: 1.3rem;
            text-align: center;
            margin-bottom: 30px;
            background: white;
            padding: 15px;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .option-card {
            background: white;
            border-radius: 25px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .option-card:hover, .selected-card {
            transform: scale(1.05);
            border-color: #ff3b30;
            background-color: #fffbfa;
        }

        #form-cita {
            display: none;
            background: white;
            padding: 25px;
            border-radius: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            margin-top: 30px;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn-enviar {
            background-color: #ff3b30;
            color: white;
            border: none;
            width: 100%;
            padding: 15px;
            border-radius: 15px;
            font-weight: 600;
        }
    </style>
</head>
<body>

    <div id="countdown">Cargando...</div>

    <h2 class="text-center mb-4">¬øQu√© prefieres hacer? ‚ù§Ô∏è</h2>

    <div class="row g-3">
        <div class="col-6"><div class="option-card" onclick="seleccionarPlan('Cena', this)">üçï<br>Cena</div></div>
        <div class="col-6"><div class="option-card" onclick="seleccionarPlan('Cine', this)">üçø<br>Cine</div></div>
        <div class="col-6"><div class="option-card" onclick="seleccionarPlan('Paseo', this)">üç¶<br>Paseo</div></div>
        <div class="col-6"><div class="option-card" onclick="seleccionarPlan('Sorpresa', this)">‚ú®<br>Sorpresa</div></div>
    </div>

    <div id="form-cita" class="container">
        <h4 class="text-center mb-3">Detalles finales</h4>
        <label>¬øA d√≥nde vamos?</label>
        <select id="lugar" class="form-select mb-3">
            <option value="Casco Viejo">Casco Viejo</option>
            <option value="Causeway">Causeway</option>
            <option value="Multiplaza">Multiplaza</option>
            <option value="Otro">T√∫ eliges...</option>
        </select>

        <label>Hora</label>
        <input type="time" id="hora" class="form-control mb-3">

        <label>¬øOtro d√≠a?</label>
        <input type="date" id="otro-dia" class="form-control mb-3">

        <label>Comentario</label>
        <textarea id="comentario" class="form-control mb-3"></textarea>

        <button onclick="enviarCita()" class="btn btn-enviar">Confirmar ‚ù§Ô∏è</button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

    <script>
        // 1. PEGA AQU√ç TU CONFIGURACI√ìN DE FIREBASE
        const firebaseConfig = {
            apiKey: "TU_API_KEY",
            authDomain: "sanvalentin-d67c2.firebaseapp.com",
            databaseURL: "https://sanvalentin-d67c2-default-rtdb.firebaseio.com/",
            projectId: "sanvalentin-d67c2",
            storageBucket: "sanvalentin-d67c2.appspot.com",
            messagingSenderId: "TU_ID",
            appId: "TU_APP_ID"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Timer
        function updateTimer() {
            const diff = new Date("2026-02-14") - new Date();
            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
            document.getElementById("countdown").innerText = `Faltan: ${d}d ${h}h para el 14 ‚ù§Ô∏è`;
        }
        setInterval(updateTimer, 1000); updateTimer();

        let planSel = "";
        function seleccionarPlan(plan, element) {
            planSel = plan;
            document.querySelectorAll('.option-card').forEach(c => c.classList.remove('selected-card'));
            element.classList.add('selected-card');
            document.getElementById("form-cita").style.display = "block";
        }

        async function enviarCita() {
            const datos = {
                plan: planSel,
                lugar: document.getElementById("lugar").value,
                hora: document.getElementById("hora").value,
                comentario: document.getElementById("comentario").value,
                fecha: new Date().toLocaleString()
            };

            try {
                // Guardar en Firebase
                await database.ref('respuestas/').push(datos);
                
                // Enviar WhatsApp (C√°mbialo por tu n√∫mero real)
                const texto = `¬°Plan confirmado! üìç ${datos.plan} en ${datos.lugar} a las ${datos.hora}`;
                window.open(`https://api.whatsapp.com/send?phone=50760000000&text=${encodeURIComponent(texto)}`);
                
            } catch (e) { alert("Error al guardar, intenta por WhatsApp"); }
        }
    </script>
</body>
</html>