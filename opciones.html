<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <title>Elige nuestro plan ‚ù§Ô∏è</title>
    <style>
        body {
            background-color: #fff5f7;
            font-family: 'Inter', sans-serif;
            padding-bottom: 50px;
        }
        
        /* Estilo de las nuevas tarjetas */
        .card-plan {
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-radius: 20px;
            overflow: hidden;
            border: 2px solid transparent;
            background: white;
        }
        
        .card-plan img {
            height: 150px;
            object-fit: cover; /* Para que la imagen no se deforme */
        }
        
        .card-plan:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .selected-card {
            border-color: #ff3b30 !important;
            background-color: #fff0f1;
            transform: scale(1.02);
        }

        .btn-confirmar {
            background-color: #ff3b30;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 12px;
            font-weight: 600;
            width: 100%;
            margin-top: 20px;
        }

        #form-detalles {
            display: none;
            animation: fadeIn 0.6s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

<div class="container py-5">
    <h2 class="text-center mb-4 fw-bold">¬øQu√© te gustar√≠a hacer, Crisss? ‚ù§Ô∏è</h2>
    
    <div class="row row-cols-2 row-cols-md-4 g-4 text-center">
        <div class="col">
            <div class="card h-100 card-plan shadow-sm" onclick="seleccionar('Cena', this)">
                <img src="https://github.com/AlexisJ31/Proyecto14/blob/main/titulo.png?raw=true" class="card-img-top" alt="Cena">
                <div class="card-body">
                    <h5 class="card-title fw-bold">Cena?</h5>
                    <p class="card-text text-muted small">Una comidita buena (no cara)</p>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card h-100 card-plan shadow-sm" onclick="seleccionar('Cine', this)">
                <img src="https://github.com/AlexisJ31/Proyecto14/blob/main/elfo.png?raw=true" class="card-img-top" alt="Cine">
                <div class="card-body">
                    <h5 class="card-title fw-bold">Cine</h5>
                    <p class="card-text text-muted small">creo que no hay nada ahora jajajaja</p>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card h-100 card-plan shadow-sm" onclick="seleccionar('Parque', this)">
                <img src="https://github.com/AlexisJ31/Proyecto14/blob/main/corazonfondo.png?raw=true" class="card-img-top" alt="Parque">
                <div class="card-body">
                    <h5 class="card-title fw-bold">Parque?</h5>
                    <p class="card-text text-muted small">Caminar y conversar</p>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card h-100 card-plan shadow-sm" onclick="seleccionar('Sorpresa', this)">
                <img src="https://github.com/AlexisJ31/Proyecto14/blob/main/titulo.png?raw=true" class="card-img-top" alt="Sorpresa">
                <div class="card-body">
                    <h5 class="card-title fw-bold">O quieres hacer t√∫ el plan?</h5>
                    <p class="card-text text-muted small">¬°D√©jamelo a m√≠!</p>
                </div>
            </div>
        </div>
    </div>

    <div id="form-detalles" class="mt-5 p-4 bg-white rounded-4 shadow-sm border mx-auto" style="max-width: 500px;">
        <h4 class="text-center mb-4">Okey okey, solo unas cositas m√°s...</h4>
        
        <div class="mb-3">
            <label class="form-label fw-semibold">¬øD√≥nde prefieres?</label>
            <select id="lugar" class="form-select">
                <option value="Cinta costera/casco viejo">Cinta costera/casco viejo</option>
                <option value="Amador">Amador</option>
                <option value="Multiplaza">Multiplaza</option>
                <option value="Ciudad del saber">Ciudad del saber</option>
                <option value="T√∫ eliges">¬°Sorpr√©ndeme!</option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label fw-semibold">¬øA qu√© hora?</label>
            <input type="time" id="hora" class="form-control">
        </div>

        <div class="mb-3">
            <label class="form-label fw-semibold">Nota extra por si quieres agregar algo</label>
            <textarea id="comentario" class="form-control" rows="2" placeholder="Ej: Pasas por m√≠..."></textarea>
        </div>

        <button onclick="guardarYEnviar()" class="btn btn-confirmar">Confirmar Cita üòç</button>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

<script>
    const firebaseConfig = {
        databaseURL: "https://sanvalentin-d67c2-default-rtdb.firebaseio.com/",
        projectId: "sanvalentin-d67c2",
    };

    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    let planElegido = "";

    function seleccionar(plan, elemento) {
        planElegido = plan;
        document.querySelectorAll('.card-plan').forEach(c => c.classList.remove('selected-card'));
        elemento.classList.add('selected-card');
        document.getElementById('form-detalles').style.display = 'block';
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }

    async function guardarYEnviar() {
        const datos = {
            plan: planElegido,
            lugar: document.getElementById('lugar').value,
            hora: document.getElementById('hora').value,
            comentario: document.getElementById('comentario').value,
            fecha: new Date().toLocaleString()
        };

        try {
            await database.ref('citas/').push(datos);
            const miTel = "50765319271"; 
            const texto = `¬°Hola Alexis! Ya eleg√≠: ${datos.plan}. Lugar: ${datos.lugar} a las ${datos.hora}. ‚ù§Ô∏è`;
            window.open(`https://api.whatsapp.com/send?phone=${miTel}&text=${encodeURIComponent(texto)}`);
        } catch (e) {
            alert("Error al guardar, pero la cita sigue en pie!");
        }
    }
</script>
</body>
</html>